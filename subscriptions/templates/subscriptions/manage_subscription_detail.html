<!-- /workspace/shiftwise/templates/subscriptions/manage_subscription_detail.html -->

{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container my-5">
    <h2>Subscription Details</h2>
    <div class="card shadow">
        <div class="card-header">
            <h4>{{ subscription.plan.name }} - {% if subscription.plan.billing_cycle == 'yearly' %}Yearly{% else %}Monthly{% endif %}</h4>
        </div>
        <div class="card-body">
            <p><strong>Agency:</strong> {{ subscription.agency.name }}</p>
            <p><strong>Description:</strong> {{ subscription.plan.description }}</p>
            <p><strong>Price:</strong> Â£{{ subscription.plan.price }}{% if subscription.plan.billing_cycle == 'yearly' %} /yr{% else %} /mo{% endif %}</p>
            <p><strong>Next Billing Date:</strong> {{ subscription.current_period_end|date:"F j, Y, g:i a" }}</p>
            <p><strong>Status:</strong> {% if subscription.is_active %}Active{% else %}Inactive{% endif %}</p>
            <a href="https://dashboard.stripe.com/subscriptions/{{ subscription.stripe_subscription_id }}" target="_blank" class="btn btn-outline-primary">View in Stripe</a>
            {% if subscription.is_active %}
                <form method="post" action="{% url 'subscriptions:cancel_subscription' %}" class="mt-3">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger btn-block">Cancel Subscription</button>
                </form>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
